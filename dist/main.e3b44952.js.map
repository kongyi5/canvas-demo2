{"version":3,"sources":["main.js"],"names":["yyy","document","getElementById","ctx","getContext","lineWidth","autoSetCanvasSize","listenToUser","eraserEnabled","drawCircle","x","y","radius","beginPath","arc","Math","PI","fill","drawLine","x1","y1","x2","y2","moveTo","lineTo","stroke","closePath","canvas","setCanvasSize","pageWidth","documentElement","clientWidth","pageHeight","clientHeight","width","height","window","onresize","using","lastPoint","undefined","body","ontouchstart","a","touches","clientX","clientY","clearRect","ontouchmove","newPoint","ontouchend","onmousedown","onmousemove","onmouseup","pen","onclick","classList","add","eraser","remove","clear","download","url","toDataURL","createElement","appendChild","href","target","click","black","strokeStyle","red","green","blue","thin","thick"],"mappings":";AAAA,IAAIA,EAAMC,SAASC,eAAe,OAC9BC,EAAMH,EAAII,WAAW,MACrBC,EAAY,EAEhBC,EAAkBN,GAClBO,EAAaP,GAEb,IAAIQ,GAAgB,EAkEpB,SAASC,EAAWC,EAAGC,EAAGC,GACxBT,EAAIU,YACJV,EAAIW,IAAIJ,EAAGC,EAAGC,EAAQ,EAAa,EAAVG,KAAKC,IAC9Bb,EAAIc,OAGN,SAASC,EAASC,EAAIC,EAAIC,EAAIC,GAC5BnB,EAAIU,YACJV,EAAIE,UAAYA,EAChBF,EAAIoB,OAAOJ,EAAIC,GACfjB,EAAIqB,OAAOH,EAAIC,GACfnB,EAAIsB,SACJtB,EAAIuB,YAGN,SAASpB,EAAkBqB,GAKhBC,SAAAA,IACHC,IAAAA,EAAY5B,SAAS6B,gBAAgBC,YACrCC,EAAa/B,SAAS6B,gBAAgBG,aAC1CN,EAAOO,MAAQL,EACfF,EAAOQ,OAASH,EARlBJ,IACAQ,OAAOC,SAAW,WAChBT,KAUJ,SAASrB,EAAaoB,GAChBW,IAAAA,GAAQ,EACRC,EAAY,CACd7B,OAAG8B,EACH7B,OAAG6B,QAG8BA,IAA/BvC,SAASwC,KAAKC,cAEhBf,EAAOe,aAAe,SAACC,GACjBjC,IAAAA,EAAIiC,EAAEC,QAAQ,GAAGC,QACjBlC,EAAIgC,EAAEC,QAAQ,GAAGE,QAErBR,GAAQ,EACJ9B,EACFL,EAAI4C,UAAUrC,EAAI,EAAGC,EAAI,EAAG,GAAI,IAEhC4B,EAAY,CACV7B,EAAGA,EACHC,EAAGA,IAITgB,EAAOqB,YAAc,SAACL,GAChBjC,IAAAA,EAAIiC,EAAEC,QAAQ,GAAGC,QACjBlC,EAAIgC,EAAEC,QAAQ,GAAGE,QAEjB,GAACR,EAGD9B,GAAAA,EACFL,EAAI4C,UAAUrC,EAAI,EAAGC,EAAI,EAAG,GAAI,QAC3B,CACDsC,IAAAA,EAAW,CACbvC,EAAGA,EACHC,EAAGA,GAELO,EAASqB,EAAU7B,EAAG6B,EAAU5B,EAAGsC,EAASvC,EAAGuC,EAAStC,GACxD4B,EAAYU,IAGhBtB,EAAOuB,WAAa,WAClBZ,GAAQ,KAIVX,EAAOwB,YAAc,SAACR,GAChBjC,IAAAA,EAAIiC,EAAEE,QACNlC,EAAIgC,EAAEG,QAEVR,GAAQ,EACJ9B,EACFL,EAAI4C,UAAUrC,EAAI,EAAGC,EAAI,EAAG,GAAI,IAEhC4B,EAAY,CACV7B,EAAGA,EACHC,EAAGA,IAITgB,EAAOyB,YAAc,SAACT,GAChBjC,IAAAA,EAAIiC,EAAEE,QACNlC,EAAIgC,EAAEG,QAEN,GAACR,EAGD9B,GAAAA,EACFL,EAAI4C,UAAUrC,EAAI,EAAGC,EAAI,EAAG,GAAI,QAC3B,CACDsC,IAAAA,EAAW,CACbvC,EAAGA,EACHC,EAAGA,GAELO,EAASqB,EAAU7B,EAAG6B,EAAU5B,EAAGsC,EAASvC,EAAGuC,EAAStC,GACxD4B,EAAYU,IAGhBtB,EAAO0B,UAAY,SAACV,GAClBL,GAAQ,IA5KdgB,IAAIC,QAAU,WACZ/C,GAAgB,EAChB8C,IAAIE,UAAUC,IAAI,UAClBC,OAAOF,UAAUG,OAAO,UACxBC,MAAMJ,UAAUG,OAAO,WAEzBD,OAAOH,QAAU,WACf/C,GAAgB,EAChBkD,OAAOF,UAAUC,IAAI,UACrBH,IAAIE,UAAUG,OAAO,UACrBC,MAAMJ,UAAUG,OAAO,WAEzBC,MAAML,QAAU,WACdK,MAAMJ,UAAUC,IAAI,UACpBC,OAAOF,UAAUG,OAAO,UACxBL,IAAIE,UAAUG,OAAO,UACrBxD,EAAI4C,UAAU,EAAG,EAAG/C,EAAIkC,MAAOlC,EAAImC,SAErC0B,SAASN,QAAU,WACbO,IAAAA,EAAM9D,EAAI+D,UAAU,aACpBpB,EAAI1C,SAAS+D,cAAc,KAC/B/D,SAASwC,KAAKwB,YAAYtB,GAC1BA,EAAEuB,KAAOJ,EACTnB,EAAEkB,SAAW,MACblB,EAAEwB,OAAS,SACXxB,EAAEyB,SAGJC,MAAMd,QAAU,WACdpD,EAAImE,YAAc,QAClBD,MAAMb,UAAUC,IAAI,UACpBc,IAAIf,UAAUG,OAAO,UACrBa,MAAMhB,UAAUG,OAAO,UACvBc,KAAKjB,UAAUG,OAAO,WAExBY,IAAIhB,QAAU,WACZpD,EAAImE,YAAc,MAClBC,IAAIf,UAAUC,IAAI,UAClBY,MAAMb,UAAUG,OAAO,UACvBa,MAAMhB,UAAUG,OAAO,UACvBc,KAAKjB,UAAUG,OAAO,WAExBa,MAAMjB,QAAU,WACdpD,EAAImE,YAAc,QAClBE,MAAMhB,UAAUC,IAAI,UACpBY,MAAMb,UAAUG,OAAO,UACvBY,IAAIf,UAAUG,OAAO,UACrBc,KAAKjB,UAAUG,OAAO,WAExBc,KAAKlB,QAAU,WACbpD,EAAImE,YAAc,OAClBG,KAAKjB,UAAUC,IAAI,UACnBY,MAAMb,UAAUG,OAAO,UACvBY,IAAIf,UAAUG,OAAO,UACrBa,MAAMhB,UAAUG,OAAO,WAGzBe,KAAKnB,QAAU,WACblD,EAAY,GAEdsE,MAAMpB,QAAU,WACdlD,EAAY","file":"main.e3b44952.js","sourceRoot":"..\\src","sourcesContent":["var yyy = document.getElementById(\"xxx\");\r\nvar ctx = yyy.getContext(\"2d\");\r\nvar lineWidth = 3;\r\n\r\nautoSetCanvasSize(yyy);\r\nlistenToUser(yyy);\r\n\r\nvar eraserEnabled = false;\r\npen.onclick = () => {\r\n  eraserEnabled = false;\r\n  pen.classList.add(\"active\");\r\n  eraser.classList.remove(\"active\");\r\n  clear.classList.remove(\"active\");\r\n};\r\neraser.onclick = () => {\r\n  eraserEnabled = true;\r\n  eraser.classList.add(\"active\");\r\n  pen.classList.remove(\"active\");\r\n  clear.classList.remove(\"active\");\r\n};\r\nclear.onclick = () => {\r\n  clear.classList.add(\"active\");\r\n  eraser.classList.remove(\"active\");\r\n  pen.classList.remove(\"active\");\r\n  ctx.clearRect(0, 0, yyy.width, yyy.height);\r\n};\r\ndownload.onclick = () => {\r\n  var url = yyy.toDataURL(\"image/png\");\r\n  var a = document.createElement(\"a\");\r\n  document.body.appendChild(a);\r\n  a.href = url;\r\n  a.download = \"我的画\";\r\n  a.target = \"_blank\";\r\n  a.click();\r\n};\r\n\r\nblack.onclick = () => {\r\n  ctx.strokeStyle = \"black\";\r\n  black.classList.add(\"active\");\r\n  red.classList.remove(\"active\");\r\n  green.classList.remove(\"active\");\r\n  blue.classList.remove(\"active\");\r\n};\r\nred.onclick = () => {\r\n  ctx.strokeStyle = \"red\";\r\n  red.classList.add(\"active\");\r\n  black.classList.remove(\"active\");\r\n  green.classList.remove(\"active\");\r\n  blue.classList.remove(\"active\");\r\n};\r\ngreen.onclick = () => {\r\n  ctx.strokeStyle = \"green\";\r\n  green.classList.add(\"active\");\r\n  black.classList.remove(\"active\");\r\n  red.classList.remove(\"active\");\r\n  blue.classList.remove(\"active\");\r\n};\r\nblue.onclick = () => {\r\n  ctx.strokeStyle = \"blue\";\r\n  blue.classList.add(\"active\");\r\n  black.classList.remove(\"active\");\r\n  red.classList.remove(\"active\");\r\n  green.classList.remove(\"active\");\r\n};\r\n\r\nthin.onclick = () => {\r\n  lineWidth = 3;\r\n};\r\nthick.onclick = () => {\r\n  lineWidth = 6;\r\n};\r\n\r\n/** 函数库 **/\r\nfunction drawCircle(x, y, radius) {\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n  ctx.fill();\r\n}\r\n\r\nfunction drawLine(x1, y1, x2, y2) {\r\n  ctx.beginPath();\r\n  ctx.lineWidth = lineWidth;\r\n  ctx.moveTo(x1, y1); // 起点\r\n  ctx.lineTo(x2, y2); // 终点\r\n  ctx.stroke();\r\n  ctx.closePath();\r\n}\r\n\r\nfunction autoSetCanvasSize(canvas) {\r\n  setCanvasSize();\r\n  window.onresize = () => {\r\n    setCanvasSize();\r\n  };\r\n  function setCanvasSize() {\r\n    var pageWidth = document.documentElement.clientWidth;\r\n    var pageHeight = document.documentElement.clientHeight;\r\n    canvas.width = pageWidth;\r\n    canvas.height = pageHeight;\r\n  }\r\n}\r\n\r\nfunction listenToUser(canvas) {\r\n  var using = false;\r\n  var lastPoint = {\r\n    x: undefined,\r\n    y: undefined,\r\n  };\r\n  // 特性检测\r\n  if (document.body.ontouchstart !== undefined) {\r\n    // 触屏设备\r\n    canvas.ontouchstart = (a) => {\r\n      var x = a.touches[0].clientX;\r\n      var y = a.touches[0].clientY;\r\n      // 相对于视口的位置\r\n      using = true;\r\n      if (eraserEnabled) {\r\n        ctx.clearRect(x - 5, y - 5, 10, 10);\r\n      } else {\r\n        lastPoint = {\r\n          x: x,\r\n          y: y,\r\n        };\r\n      }\r\n    };\r\n    canvas.ontouchmove = (a) => {\r\n      var x = a.touches[0].clientX;\r\n      var y = a.touches[0].clientY;\r\n      // 相对于视口的位置\r\n      if (!using) {\r\n        return;\r\n      }\r\n      if (eraserEnabled) {\r\n        ctx.clearRect(x - 5, y - 5, 10, 10);\r\n      } else {\r\n        var newPoint = {\r\n          x: x,\r\n          y: y,\r\n        };\r\n        drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y);\r\n        lastPoint = newPoint;\r\n      }\r\n    };\r\n    canvas.ontouchend = () => {\r\n      using = false;\r\n    };\r\n  } else {\r\n    // 非触屏设备\r\n    canvas.onmousedown = (a) => {\r\n      var x = a.clientX;\r\n      var y = a.clientY;\r\n      // 相对于视口的位置\r\n      using = true;\r\n      if (eraserEnabled) {\r\n        ctx.clearRect(x - 5, y - 5, 10, 10);\r\n      } else {\r\n        lastPoint = {\r\n          x: x,\r\n          y: y,\r\n        };\r\n      }\r\n    };\r\n    canvas.onmousemove = (a) => {\r\n      var x = a.clientX;\r\n      var y = a.clientY;\r\n      // 相对于视口的位置\r\n      if (!using) {\r\n        return;\r\n      }\r\n      if (eraserEnabled) {\r\n        ctx.clearRect(x - 5, y - 5, 10, 10);\r\n      } else {\r\n        var newPoint = {\r\n          x: x,\r\n          y: y,\r\n        };\r\n        drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y);\r\n        lastPoint = newPoint;\r\n      }\r\n    };\r\n    canvas.onmouseup = (a) => {\r\n      using = false;\r\n    };\r\n  }\r\n}\r\n"]}